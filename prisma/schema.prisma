generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Setup {
  id            String      @id @default(cuid())
  titulo        String
  descricao     String?
  imagemUrl     String
  imagens       String[]    @default([])
  videoUrl      String?
  isVideo       Boolean     @default(false)
  autor         String?
  fonte         String?
  fonteUrl      String?
  destaque      Boolean     @default(false)
  visualizacoes Int         @default(0)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  produtos      Produto[]
  categorias    Categoria[] @relation("CategoriaToSetup")
}

model GrupoCategoria {
  id         String      @id @default(cuid())
  nome       String      @unique
  slug       String      @unique
  ordem      Int         @default(0)
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  categorias Categoria[]
}

model Categoria {
  id        String          @id @default(cuid())
  nome      String          @unique
  slug      String          @unique
  descricao String?
  cor       String?
  icone     String?
  ordem     Int             @default(0)
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  setups    Setup[]         @relation("CategoriaToSetup")
  grupoId   String?
  grupo     GrupoCategoria? @relation(fields: [grupoId], references: [id])
}

model Produto {
  id            String   @id @default(cuid())
  nome          String
  descricao     String?
  categoria     String
  imagemUrl     String?
  preco         Float?
  moeda         String   @default("BRL")
  linkCompra    String?
  loja          String?
  destaque      Boolean  @default(false)
  ordem         Int      @default(0)
  hotspotX      Float?
  hotspotY      Float?
  hotspotImagem Int?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  setupId       String
  setup         Setup    @relation(fields: [setupId], references: [id], onDelete: Cascade)
}
